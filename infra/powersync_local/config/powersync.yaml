# yaml-language-server: $schema=https://unpkg.com/@powersync/service@latest/schema/schema.json

telemetry:
  disable_telemetry_sharing: false

replication:
  connections:
    - type: postgresql
      uri: !env PS_DATA_SOURCE_URI
      sslmode: disable

storage:
  type: mongodb
  uri: !env PS_MONGO_URI

port: !env PS_PORT

sync_rules:
  path: sync_rules.yaml

client_auth:
  # Use Supabase Auth (PowerSync will validate JWTs against the JWKS endpoint).
  supabase: true
  jwks_uri: !env PS_JWKS_URL
  audience: ["authenticated"]
  # Allow local (http://...) JWKS URIs for local dev.
  allow_local_jwks: true
