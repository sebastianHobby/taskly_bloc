# UI Decision: Journal redesign (entry feed + tracker management)

Date (UTC): 2026-01-15
Last updated at (UTC): 2026-01-15T12:30:44.4044895Z
Status: Accepted
Owner: Copilot + User

## Context

We want the Journal experience to feel closer to Daylio (fast mood logging, quick tracker selection, delightful history browsing) while still fitting Taskly’s architecture and UI language.

Primary goals:
- Make logging feel effortless (mood-first, trackers are equally important).
- Support multiple logs per day without feeling “busy.”
- Make history browsing meaningful (mood + trackers + note summary).
- Keep tracker management discoverable but not in the way.

Non-goals (for this decision):
- Final visual polish of the tracker management screen.
- Analytics / trends UI (calendar heatmaps, charts).

## Unified Screen Model Alignment

- Screen(s): `journal` (system screen key)
- Template(s): Migrate to `ScreenTemplateSpec.standardScaffoldV1` (standard USM screen).
- Section(s) / module(s): Implement Journal as slotted modules. Preserve the presentation boundary: no widget -> repository calls; keep data access inside BLoCs.

## Impact Summary

- Other screens affected:
  - Potential confusion with `trackers` system screen (currently placeholder) vs journal "Trackers" tab.
  - Navigation entry points if Journal becomes a single-feed screen.
- Shared components/widgets affected:
  - Potentially reuse `TasklyCard`, `TasklyTokens`, and chip styles for entry summary cards.
  - Potentially reuse mood selector UI patterns (emoji chips) for fast mood logging.
- Design tokens/theme impacts:
  - Prefer applying `TasklyTokens` consistently for spacing/radii.
  - Consider a small journal-specific ThemeExtension later (optional) for mood colors/chip density.

## Options

### UX-001 — Journal as a date-list feed (screen redesign)

A) **Feed-first Journal (recommended default)**
- Journal opens to a reverse-chronological feed grouped by date (Today, Yesterday, etc.).
- Each entry is a compact card summary:
  - time
  - mood (emoji or value chip)
  - a small row of tracker chips (limit to 3–5 with "+N")
  - 1–2 line note preview (truncate)
- FAB: "Add log".
- Add flow:
  - A1) Bottom sheet composer (fast; matches current implementation)
  - A2) Full-screen route composer (best for rich trackers + note; scalable)
  - A3) Hybrid: bottom sheet for mood+quick trackers; "More" expands to full screen
- Tracker management:
  - A1) Top-right action "Manage trackers" (gear/sliders) -> dedicated settings-style page
  - A2) Inline "Trackers" section at top of feed (collapsible)

Why it works:
- Daylio-like mental model (timeline of entries) and fast add.
- Doesn’t require tabs to understand the product.
- Scales well to more analytics later (calendar, charts) without changing the core.

B) **Calendar-first Journal**
- Journal opens to a month calendar view with mood dots/heatmap per day.
- Selecting a day shows entries for that day (list or cards).
- FAB still adds a log, but the default date is whatever day is selected.
- Tracker management in a toolbar action or bottom "Settings" entry.

Why it works:
- Very Daylio-adjacent and great for retrospection.
- Makes mood trends feel native.

Risk:
- Slower to “just log something right now” unless the add affordance is strong.

C) **Today-first + History secondary (tabless)**
- Journal opens to a Today page that is primarily a logging surface.
- Below that: today’s entries, then a previous-days teaser + a clear path to full history.
- Tracker management is accessible from the Today surface.

Why it works:
- Optimizes for daily habit.
- Keeps history available but not the default.

Risk:
- If users mostly browse history, this is the wrong default.

Recommendation: A (Feed-first Journal), with add flow A3 (hybrid sheet -> full screen) and tracker mgmt A1 (top-right action).

### UX-001C (Accepted) — Today-first Journal (standard USM screen)

This section records the agreed direction for UX-001C.

UX-001C-01 — Today page layout
- Chosen: **A) Hero composer + Recent entries + Previous days teaser**
- Details:
  - Hero composer is first content on the screen (sets the “daily ritual”).
  - Then: today’s entries (cards/rows).
  - Then: previous days teaser (e.g., last 3–5 days) + “See all history”.

UX-001C-02 — Add-entry flow
- Chosen: **C) Full-screen route composer**
- Details:
  - FAB and “Add log” affordances navigate to the full-screen composer.
  - Editing an entry uses the same route (prefilled).

UX-001C-03 — History access
- Chosen: **A) Explicit access**
- Details:
  - Prominent “See all history” button.
  - Calendar icon/action in the app bar.

UX-001C-04 — Trackers management + quick add
- Chosen: **A) App bar action “Manage trackers”**.
- Quick add requirement:
  - Show **daily trackers** in a quick add row (first N, with a “More” affordance).
  - If more than N trackers are eligible, show “More” to open the full selector.

Daily vs per-entry trackers (sticky behavior)
- Requirement: Some trackers are **daily (applies to the day)**, some are **per-entry**.
- Visual rule: Label these explicitly as **“Today”** vs **“This entry”** wherever both are visible.
- Interaction rule:
  - Mood first.
  - Trackers selection is equally important.
  - Notes come last.

Entry tap behavior (Q4)
- Chosen: **Tap opens the full-screen editor directly** (no read-only preview step).

USM implementation plan (conceptual)
- Migrate `journal` to a standard USM screen (`standardScaffoldV1`) with typed modules.
- Proposed module breakdown:
  - Header slot: `JournalTodayComposerHeaderV1` (mood-first + trackers + add/log affordance)
  - Primary slot: `JournalTodayEntriesV1` (today’s entries)
  - Primary slot: `JournalPreviousDaysTeaserV1` (day summaries + “See all history”)
- “See all history” should navigate to a dedicated screen key (e.g. `journal_history`) to keep deep links and screen prefs clean.

## Decision

- Chosen: UX-001C-01A, UX-001C-02C, UX-001C-03A, UX-001C-04A, Q4-A
- Rationale:
  - Today-first supports the daily habit loop while keeping history one tap away.
  - Full-screen editor reduces cramped composition and scales to richer tracker types.
  - Explicit “See all history” + calendar affordance preserves discoverability without tabs.
  - Making Journal a standard USM screen keeps architecture consistent and reusable.

## Consequences

- Positive:
  - A single, legible Journal mental model (entries feed) reduces navigation complexity.
  - Easy to incorporate Daylio-like visual cues (mood emoji, tiny chips, date grouping).
- Trade-offs / risks:
  - Removing tabs means Trackers/History must be discoverable via actions/sections.
  - Need careful density tuning for desktop/web vs phone.
  - Daily vs per-entry trackers introduces conceptual complexity; labels (“Today” / “This entry”) are required to avoid confusion.
  - Full-screen editor adds a navigation step vs in-place editing, but improves composition space.

## Additional accepted decisions (UX-019..UX-026)

These decisions were locked after UX-001C and are recorded here so the
implementation plan can be written against stable product intent.

- UX-019C: Mood is tracked via the system mood tracker event model (not a
  separate “mood field”), and remains the single source of truth for mood.

- UX-020A (Post-save behavior):
  - What user does: taps Save in the full-screen editor.
  - What system does:
    - Persist the entry + tracker events.
    - Navigate back to the Journal Today screen.
    - Show a lightweight confirmation (snackbar/toast) “Saved”.
  - Notes:
    - Avoid additional confirmation dialogs.

- UX-021B (Editor structure):
  - What user does: opens the full-screen editor to add/edit.
  - What system does:
    - Render a single scrolling screen with a stable section order:
      1) Mood (required)
      2) Trackers (equally important)
      3) Note (last)
    - Keep controls visible and consistent across add vs edit.

- UX-022B (Entry tap behavior):
  - What user does: taps an existing log entry.
  - What system does:
    - Open the same full-screen editor route used for add, prefilled.
    - Saving returns to Journal Today with “Saved”.

- UX-023A (History access):
  - What user does: taps “See all history” or the calendar/history affordance.
  - What system does: navigates to a dedicated History screen key.

- UX-024A (Manage trackers access):
  - What user does: taps the app bar action “Manage trackers”.
  - What system does: navigates to a dedicated Manage Trackers screen key.
- UX-025A: Mood is required to save a log/entry.
- UX-026A: Use `TrackerDefinition.isOutcome` as the single source of truth for
  classification (`true = outcome`, `false = factor` default). Keep this
  classification out of the daily Today logging loop; configure it in Manage
  Trackers / tracker editing.

## Routing + screen keys (implementation)

- `journal`: Today-first surface (USM `standardScaffoldV1`).
- `journal_history`: History browse screen (non-navigation system screen).
- `journal_manage_trackers`: Manage Trackers screen (non-navigation system screen).
- Entry editor: dedicated full-screen route (not a system screen key).

## Follow-ups

- Define the tracker taxonomy:
  - which trackers are daily-only vs per-entry vs both
  - how “daily state” is represented visually in Today + History
- Decide whether to keep a separate `trackers` system screen key or route it into Journal “Manage trackers”.

- Normalize UX-020..UX-024 into implementation-ready language in this doc once
  the final wording is confirmed (see plan Phase 01).
