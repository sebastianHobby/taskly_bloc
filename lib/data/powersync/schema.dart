import 'package:powersync/powersync.dart';
import 'package:powersync_core/powersync_core.dart';

//Generated from powersync dashboard --> Client setup
// Note powersync expects everything as SQLITE types of text,integer or real
// Casts it to appropiate type when syncing
const schema = Schema([
  Table('tasks', [
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('name'),
    Column.integer('completed'),
    Column.text('start_date'),
    Column.text('deadline_date'),
    Column.text('description'),
    Column.text('project_id'),
    Column.text('user_id'),
    Column.text('repeat_ical_rrule'),
    Column.integer('series_ended'),
    Column.integer('repeat_from_completion'),
    Column.text('review_notes'),
    Column.integer('priority'),
    Column.integer('pinned'),
  ]),
  Table('projects', [
    Column.text('name'),
    Column.text('description'),
    Column.integer('completed'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('user_id'),
    Column.text('start_date'),
    Column.text('deadline_date'),
    Column.text('repeat_ical_rrule'),
    Column.text('last_review_date'),
    Column.integer('series_ended'),
    Column.integer('repeat_from_completion'),
    Column.integer('priority'),
    Column.integer('pinned'),
  ]),
  Table('values', [
    Column.text('name'),
    Column.text('color'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('user_id'),
    Column.text('icon_name'),
    Column.text('priority'),
  ]),
  Table('project_values', [
    Column.text('project_id'),
    Column.text('value_id'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('user_id'),
    Column.integer('is_primary'),
  ]),
  Table('task_values', [
    Column.text('task_id'),
    Column.text('value_id'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('user_id'),
    Column.integer('is_primary'),
  ]),
  Table('user_profiles', [
    Column.text('user_id'),
    Column.text('global_settings'),
    Column.text('allocation_settings'),
    Column.text('page_sort_preferences'),
    Column.text('page_display_settings'),
    Column.text('created_at'),
    Column.text('updated_at'),
  ]),
  Table('screen_definitions', [
    Column.text('user_id'),
    Column.text('screen_key'),
    Column.text('name'),
    Column.text('icon_name'),
    Column.integer('is_active'),
    Column.integer('sort_order'),
    Column.text('content_config'),
    Column.text('actions_config'),
    Column.text('source'),
    Column.text('created_at'),
    Column.text('updated_at'),
  ]),
  Table('pending_notifications', [
    Column.text('user_id'),
    Column.text('scheduled_for'),
    Column.text('status'),
    Column.text('payload'),
    Column.text('created_at'),
    Column.text('delivered_at'),
    Column.text('seen_at'),
    Column.text('screen_key'),
  ]),
  Table('attention_rules', [
    Column.text('rule_key'),
    Column.text('user_id'),
    Column.text('rule_type'),
    Column.text('trigger_type'),
    Column.text('trigger_config'),
    Column.text('entity_selector'),
    Column.text('severity'),
    Column.text('display_config'),
    Column.text('resolution_actions'),
    Column.integer('active'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('source'),
  ]),
  Table('task_completion_history', [
    Column.text('task_id'),
    Column.text('occurrence_date'),
    Column.text('original_occurrence_date'),
    Column.text('completed_at'),
    Column.text('notes'),
    Column.text('user_id'),
    Column.text('created_at'),
    Column.text('updated_at'),
  ]),
  Table('project_completion_history', [
    Column.text('project_id'),
    Column.text('occurrence_date'),
    Column.text('original_occurrence_date'),
    Column.text('completed_at'),
    Column.text('notes'),
    Column.text('user_id'),
    Column.text('created_at'),
    Column.text('updated_at'),
  ]),
  Table('task_recurrence_exceptions', [
    Column.text('task_id'),
    Column.text('original_date'),
    Column.text('exception_type'),
    Column.text('new_date'),
    Column.text('new_deadline'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('user_id'),
  ]),
  Table('project_recurrence_exceptions', [
    Column.text('project_id'),
    Column.text('original_date'),
    Column.text('exception_type'),
    Column.text('new_date'),
    Column.text('new_deadline'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('user_id'),
  ]),
  Table('attention_resolutions', [
    Column.text('user_id'),
    Column.text('rule_id'),
    Column.text('entity_id'),
    Column.text('entity_type'),
    Column.text('resolved_at'),
    Column.text('resolution_action'),
    Column.text('action_details'),
    Column.text('created_at'),
  ]),

  // Allocation snapshots (daily, allocated membership only)
  Table('allocation_snapshots', [
    Column.text('user_id'),
    Column.text('day_utc'),
    Column.integer('version'),
    Column.integer('cap_at_generation'),
    Column.integer('candidate_pool_count_at_generation'),
    Column.text('created_at'),
    Column.text('updated_at'),
  ]),
  Table('allocation_snapshot_entries', [
    Column.text('user_id'),
    Column.text('snapshot_id'),
    Column.text('entity_type'),
    Column.text('entity_id'),
    Column.text('project_id'),
    Column.text('qualifying_value_id'),
    Column.text('effective_primary_value_id'),
    Column.real('allocation_score'),
    Column.text('created_at'),
    Column.text('updated_at'),
  ]),
  Table('analytics_snapshots', [
    Column.text('user_id'),
    Column.text('entity_type'),
    Column.text('entity_id'),
    Column.text('snapshot_date'),
    Column.text('metrics'),
    Column.text('created_at'),
  ]),
  Table('analytics_correlations', [
    Column.text('user_id'),
    Column.text('correlation_type'),
    Column.text('source_type'),
    Column.text('source_id'),
    Column.text('target_type'),
    Column.text('target_id'),
    Column.text('period_start'),
    Column.text('period_end'),
    Column.text('coefficient'),
    Column.integer('sample_size'),
    Column.text('strength'),
    Column.text('insight'),
    Column.text('value_with_source'),
    Column.text('value_without_source'),
    Column.text('computed_at'),
    Column.text('statistical_significance'),
    Column.text('performance_metrics'),
  ]),
  Table('analytics_insights', [
    Column.text('user_id'),
    Column.text('insight_type'),
    Column.text('title'),
    Column.text('description'),
    Column.text('metadata'),
    Column.text('score'),
    Column.text('confidence'),
    Column.integer('is_positive'),
    Column.text('generated_at'),
    Column.text('period_start'),
    Column.text('period_end'),
    Column.text('created_at'),
  ]),
  Table('journal_entries', [
    Column.text('user_id'),
    Column.text('entry_date'),
    Column.text('entry_time'),
    Column.integer('mood_rating'),
    Column.text('journal_text'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('deleted_at'),
  ]),
  Table('trackers', [
    Column.text('user_id'),
    Column.text('name'),
    Column.text('description'),
    Column.text('response_type'),
    Column.text('response_config'),
    Column.text('entry_scope'),
    Column.integer('sort_order'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('deleted_at'),
  ]),
  Table('tracker_responses', [
    Column.text('journal_entry_id'),
    Column.text('tracker_id'),
    Column.text('response_value'),
    Column.text('created_at'),
    Column.text('updated_at'),
    Column.text('user_id'),
  ]),
  Table('daily_tracker_responses', [
    Column.text('user_id'),
    Column.text('tracker_id'),
    Column.text('response_date'),
    Column.text('response_value'),
    Column.text('created_at'),
    Column.text('updated_at'),
  ]),
  Table('screen_preferences', [
    // user_id is synced and enforced by backend/RLS. The app does not use it.
    Column.text('user_id'),
    Column.text('screen_key'),
    Column.integer('is_active'),
    Column.integer('sort_order'),
    Column.text('created_at'),
    Column.text('updated_at'),
  ]),
]);
